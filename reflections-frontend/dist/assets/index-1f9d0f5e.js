var Se=Object.defineProperty;var Re=(s,n,c)=>n in s?Se(s,n,{enumerable:!0,configurable:!0,writable:!0,value:c}):s[n]=c;var Y=(s,n,c)=>(Re(s,typeof n!="symbol"?n+"":n,c),c);import{r as a,j as e,R as Te}from"./react-d39729e7.js";import{c as Ae}from"./react-dom-eb291ab4.js";import{d as T}from"./dayjs-afe83796.js";import{a as te}from"./axios-28bc18a3.js";import{o as Be}from"./jwt-decode-9c18df67.js";import{E as De,t,u as se,T as ne,H as le,C as ae,a as H,L as re,S as ce,b as ie,c as oe}from"./@tiptap-858bdebf.js";import{c as de,p as fe,j as ue}from"./highlight.js-ce00471d.js";import{c as xe}from"./lowlight-f028c058.js";import{a as B,b as K,d as Ie,e as Le,f as R}from"./react-router-6ab5a7f0.js";import{L as X,u as Pe,B as Ee}from"./react-router-dom-7f7eab61.js";import"./scheduler-765c72db.js";import"./prosemirror-state-d99efc48.js";import"./prosemirror-model-714031c1.js";import"./orderedmap-1b52af60.js";import"./prosemirror-transform-4fc52813.js";import"./prosemirror-view-799f8507.js";import"./prosemirror-keymap-8634b7a8.js";import"./w3c-keyname-a25e4cc1.js";import"./prosemirror-commands-175c63be.js";import"./prosemirror-schema-list-771d4f75.js";import"./prosemirror-dropcursor-da1713bb.js";import"./prosemirror-gapcursor-b46cb10f.js";import"./prosemirror-history-1f4dfada.js";import"./rope-sequence-5ceeafee.js";import"./@remix-run-1dd2da88.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const f of o.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&i(f)}).observe(document,{childList:!0,subtree:!0});function c(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(r){if(r.ep)return;r.ep=!0;const o=c(r);fetch(r.href,o)}})();class Me{constructor(n,c){Y(this,"endpoint");Y(this,"apiClient");this.endpoint=n,this.apiClient=c}get(n){return this.apiClient.get(this.endpoint+n)}post(n,c){return this.apiClient.post(this.endpoint+n,c)}put(n,c){return this.apiClient.put(this.endpoint+"/"+n,c)}delete(n){return this.apiClient.delete(this.endpoint+"/"+n)}}const pe=(s,n)=>new Me(s,n),ze=()=>me.post("/api/user/refresh"),me=te.create({baseURL:""}),he=te.create({baseURL:"",withCredentials:!0});he.interceptors.request.use(s=>{const n=localStorage.getItem("accessToken"),c=new Date;let i,r;return n&&(i=Be(n),r=i.exp),r&&r*1e3<c.getTime()||!n?ze().then(f=>{f.data.accessToken&&(localStorage.setItem("accessToken",f.data.accessToken),s.headers.Authorization=`Bearer ${f.data.accessToken}`)}).catch(()=>{console.log("Session Expired/No access token"),window.location.href="/login"}):s.headers.Authorization=`Bearer ${n}`,s});const I=pe("/api/content",he),L=pe("/api/user",me),ge=De.create({name:"smilieReplacer",addInputRules(){return[t({find:/-___- $/,replace:"😑 "}),t({find:/:'-\) $/,replace:"😂 "}),t({find:/':-\) $/,replace:"😅 "}),t({find:/':-D $/,replace:"😅 "}),t({find:/>:-\) $/,replace:"😆 "}),t({find:/-__- $/,replace:"😑 "}),t({find:/':-\( $/,replace:"😓 "}),t({find:/:'-\( $/,replace:"😢 "}),t({find:/>:-\( $/,replace:"😠 "}),t({find:/O:-\) $/,replace:"😇 "}),t({find:/0:-3 $/,replace:"😇 "}),t({find:/0:-\) $/,replace:"😇 "}),t({find:/0;\^\) $/,replace:"😇 "}),t({find:/O;-\) $/,replace:"😇 "}),t({find:/0;-\) $/,replace:"😇 "}),t({find:/O:-3 $/,replace:"😇 "}),t({find:/:'\) $/,replace:"😂 "}),t({find:/:-D $/,replace:"😃 "}),t({find:/':\) $/,replace:"😅 "}),t({find:/'=\) $/,replace:"😅 "}),t({find:/':D $/,replace:"😅 "}),t({find:/'=D $/,replace:"😅 "}),t({find:/>:\) $/,replace:"😆 "}),t({find:/>;\) $/,replace:"😆 "}),t({find:/>=\) $/,replace:"😆 "}),t({find:/;-\) $/,replace:"😉 "}),t({find:/\*-\) $/,replace:"😉 "}),t({find:/;-\] $/,replace:"😉 "}),t({find:/;\^\) $/,replace:"😉 "}),t({find:/B-\) $/,replace:"😎 "}),t({find:/8-\) $/,replace:"😎 "}),t({find:/B-D $/,replace:"😎 "}),t({find:/8-D $/,replace:"😎 "}),t({find:/:-\* $/,replace:"😘 "}),t({find:/:\^\* $/,replace:"😘 "}),t({find:/:-\) $/,replace:"🙂 "}),t({find:/-_- $/,replace:"😑 "}),t({find:/:-X $/,replace:"😶 "}),t({find:/:-# $/,replace:"😶 "}),t({find:/:-x $/,replace:"😶 "}),t({find:/>.< $/,replace:"😣 "}),t({find:/:-O $/,replace:"😮 "}),t({find:/:-o $/,replace:"😮 "}),t({find:/O_O $/,replace:"😮 "}),t({find:/>:O $/,replace:"😮 "}),t({find:/:-P $/,replace:"😛 "}),t({find:/:-p $/,replace:"😛 "}),t({find:/:-Þ $/,replace:"😛 "}),t({find:/:-þ $/,replace:"😛 "}),t({find:/:-b $/,replace:"😛 "}),t({find:/>:P $/,replace:"😜 "}),t({find:/X-P $/,replace:"😜 "}),t({find:/x-p $/,replace:"😜 "}),t({find:/':\( $/,replace:"😓 "}),t({find:/'=\( $/,replace:"😓 "}),t({find:/>:\\ $/,replace:"😕 "}),t({find:/>:\/ $/,replace:"😕 "}),t({find:/:-\/ $/,replace:"😕 "}),t({find:/:-. $/,replace:"😕 "}),t({find:/>:\[ $/,replace:"😞 "}),t({find:/:-\( $/,replace:"😞 "}),t({find:/:-\[ $/,replace:"😞 "}),t({find:/:'\( $/,replace:"😢 "}),t({find:/;-\( $/,replace:"😢 "}),t({find:/#-\) $/,replace:"😵 "}),t({find:/%-\) $/,replace:"😵 "}),t({find:/X-\) $/,replace:"😵 "}),t({find:/>:\( $/,replace:"😠 "}),t({find:/0:3 $/,replace:"😇 "}),t({find:/0:\) $/,replace:"😇 "}),t({find:/O:\) $/,replace:"😇 "}),t({find:/O=\) $/,replace:"😇 "}),t({find:/O:3 $/,replace:"😇 "}),t({find:/<\/3 $/,replace:"💔 "}),t({find:/:D $/,replace:"😃 "}),t({find:/=D $/,replace:"😃 "}),t({find:/;\) $/,replace:"😉 "}),t({find:/\*\) $/,replace:"😉 "}),t({find:/;\] $/,replace:"😉 "}),t({find:/;D $/,replace:"😉 "}),t({find:/B\) $/,replace:"😎 "}),t({find:/8\) $/,replace:"😎 "}),t({find:/:\* $/,replace:"😘 "}),t({find:/=\* $/,replace:"😘 "}),t({find:/:\) $/,replace:"🙂 "}),t({find:/=\] $/,replace:"🙂 "}),t({find:/=\) $/,replace:"🙂 "}),t({find:/:\] $/,replace:"🙂 "}),t({find:/:X $/,replace:"😶 "}),t({find:/:# $/,replace:"😶 "}),t({find:/=X $/,replace:"😶 "}),t({find:/=x $/,replace:"😶 "}),t({find:/:x $/,replace:"😶 "}),t({find:/=# $/,replace:"😶 "}),t({find:/:O $/,replace:"😮 "}),t({find:/:o $/,replace:"😮 "}),t({find:/:P $/,replace:"😛 "}),t({find:/=P $/,replace:"😛 "}),t({find:/:p $/,replace:"😛  "}),t({find:/=p $/,replace:"😛 "}),t({find:/:Þ $/,replace:"😛 "}),t({find:/:þ $/,replace:"😛 "}),t({find:/:b $/,replace:"😛 "}),t({find:/d: $/,replace:"😛 "}),t({find:/:\/ $/,replace:"😕 "}),t({find:/:\\ $/,replace:"😕 "}),t({find:/=\/ $/,replace:"😕 "}),t({find:/=\\ $/,replace:"😕 "}),t({find:/:L $/,replace:"😕 "}),t({find:/=L $/,replace:"😕 "}),t({find:/:\( $/,replace:"😞 "}),t({find:/:\[ $/,replace:"😞 "}),t({find:/=\( $/,replace:"😞 "}),t({find:/;\( $/,replace:"😢 "}),t({find:/D: $/,replace:"😨 "}),t({find:/:\$ $/,replace:"😳 "}),t({find:/=\$ $/,replace:"😳 "}),t({find:/#\) $/,replace:"😵 "}),t({find:/%\) $/,replace:"😵 "}),t({find:/X\) $/,replace:"😵 "}),t({find:/:@ $/,replace:"😠 "}),t({find:/<3 $/,replace:"❤️ "}),t({find:/\/shrug $/,replace:"¯\\_(ツ)_/¯"})]}});const q=xe();q.register("cpp",de);q.register("py",fe);q.register("js",ue);const _e=({editor:s})=>{if(!s)return null;const n=B();return e.jsx("div",{className:"flex justify-center text-[17px]",children:e.jsxs("div",{className:"customScroll mx-8 mt-8 flex gap-1 overflow-auto rounded-lg bg-[#363636] px-1 py-[5px] text-[#a1a1a1]",children:[e.jsx("button",{id:"btn-bold",onClick:()=>s.chain().focus().toggleBold().run(),disabled:!s.can().chain().focus().toggleBold().run(),className:`flex ${s.isActive("bold")?"is-active":""} rounded-md px-2 py-0.5`,children:"bold"}),e.jsx("button",{id:"btn-italic",onClick:()=>s.chain().focus().toggleItalic().run(),disabled:!s.can().chain().focus().toggleItalic().run(),className:`flex ${s.isActive("italic")?"is-active":""} rounded-md px-2 py-0.5 `,children:"italic"}),e.jsx("button",{id:"btn-strike",onClick:()=>s.chain().focus().toggleStrike().run(),disabled:!s.can().chain().focus().toggleStrike().run(),className:`flex ${s.isActive("strike")?"is-active":""} rounded-md px-2 py-0.5`,children:"strike"}),e.jsx("button",{id:"btn-code",onClick:()=>s.chain().focus().toggleCode().run(),disabled:!s.can().chain().focus().toggleCode().run(),className:`flex ${s.isActive("code")?"is-active":""} rounded-md px-2 py-0.5 `,children:"code"}),e.jsx("button",{onClick:()=>s.chain().focus().setParagraph().run(),className:`${s.isActive("paragraph")?"is-active":""} flex rounded-md px-2 py-0.5 `,children:"paragraph"}),e.jsx("button",{id:"btn-bullet",onClick:()=>s.chain().focus().toggleBulletList().run(),className:`${s.isActive("bulletList")?"is-active":""} flex rounded-md px-2 py-0.5 `,children:"bulletlist"}),e.jsx("button",{onClick:()=>s.chain().focus().toggleOrderedList().run(),className:`${s.isActive("orderedList")?"is-active":""} rounded-md    px-2 py-0.5 `,children:"orderedlist"}),e.jsx("button",{onClick:()=>s.chain().focus().toggleCodeBlock().run(),className:`${s.isActive("codeBlock")?"is-active":""} flex rounded-md px-2 py-0.5 `,children:"codeblock"}),e.jsx("button",{onClick:()=>s.chain().focus().toggleBlockquote().run(),className:`${s.isActive("blockquote")?"is-active":""} flex rounded-md px-2 py-0.5 `,children:"blockquote"}),e.jsx("button",{onClick:()=>s.chain().focus().setHorizontalRule().run(),className:"flex rounded-md px-2 py-0.5  ",children:"horizontalrule"}),e.jsx("button",{onClick:()=>s.chain().focus().toggleHeading({level:3}).run(),className:`${s.isActive("heading",{level:3})?"is-active":""} flex rounded-md px-2 py-0.5 `,children:"h1"}),e.jsx("button",{onClick:()=>s.chain().focus().toggleHeading({level:4}).run(),className:`${s.isActive("heading",{level:4})?"is-active":""} flex rounded-md px-2 py-0.5 `,children:"h2"}),e.jsx("button",{onClick:()=>s.chain().focus().toggleHighlight({color:"#b197fc"}).setColor(s!=null&&s.isActive("highlight",{color:"#b197fc"})?"":"#000000").run(),className:`${s.isActive("highlight",{color:"#b197fc"})?"is-active":""}
				flex rounded-md px-2 py-0.5`,children:"purple"}),e.jsx("button",{onClick:()=>s.chain().focus().toggleHighlight({color:"#74c0fc"}).setColor(s!=null&&s.isActive("highlight",{color:"#74c0fc"})?"":"#000000").run(),className:`${s.isActive("highlight",{color:"#74c0fc"})?"is-active":""} flex rounded-md px-2 py-0.5`,children:"blue"}),e.jsx("button",{onClick:()=>s.chain().focus().toggleHighlight({color:"#0ec3ac"}).setColor(s!=null&&s.isActive("highlight",{color:"#0ec3ac"})?"":"#000000").run(),className:`${s.isActive("highlight",{color:"#0ec3ac"})?"is-active":""} flex rounded-md px-2 py-0.5`,children:"teal"}),e.jsx("button",{onClick:()=>s.chain().focus().unsetAllMarks().run(),className:"flex rounded-md px-2 py-0.5  ",children:"clearmarks"}),e.jsx("button",{onClick:()=>s.chain().focus().clearNodes().run(),className:"flex rounded-md px-2 py-0.5  ",children:"clearnodes"}),e.jsx("button",{onClick:()=>s.chain().focus().undo().run(),disabled:!s.can().chain().focus().undo().run(),className:"flex rounded-md px-2 py-0.5  ",children:"undo"}),e.jsx("button",{onClick:()=>s.chain().focus().redo().run(),disabled:!s.can().chain().focus().redo().run(),className:"flex rounded-md px-2 py-0.5  ",children:"redo"}),e.jsx("button",{className:"logoutBtn flex rounded-md px-2 py-0.5 hover:border-0 hover:bg-[#da6888] hover:text-stone-900",onClick:()=>{L.get("/logout"),localStorage.removeItem("userName"),localStorage.removeItem("recentsCount"),localStorage.removeItem("accessToken"),n("/login")},children:"logout"})]})})},Oe=({editorValue:s,setEditorValue:n,title:c,changeNote:i,setChangeNote:r,btnId:o})=>{const f=se({extensions:[ne,le.configure({multicolor:!0}),ae.configure({types:[H.name,re.name]}),H.configure(),ce.configure({bulletList:{keepMarks:!0,keepAttributes:!1},orderedList:{keepMarks:!0,keepAttributes:!1},codeBlock:!1,dropcursor:!1,gapcursor:!1,hardBreak:!1}),ge,ie.configure({languageClassPrefix:"language-",lowlight:q})],onUpdate:({editor:m})=>{const g=m.getHTML();x(g)},content:s,editable:!0});a.useEffect(()=>{i&&(f==null||f.commands.setContent(s),r(!1))},[i]);const x=m=>{n(m)};return a.useEffect(()=>{const m=document.getElementById(o.id);m&&m.click()},[o]),e.jsxs("div",{className:"customScroll flex h-full w-full flex-col gap-5 overflow-auto bg-[#1e1e1e]",children:[e.jsx(_e,{editor:f}),e.jsx("input",{className:"mx-8 mt-8 flex w-1/2 border-b-2 border-[#515151] bg-transparent text-xl font-semibold text-[#dadada] sm:w-2/5 md:w-1/4",placeholder:"title goes here",ref:c,spellCheck:"false"}),e.jsx(oe,{spellCheck:!1,editor:f,className:"customScroll mx-8 mb-12 mt-2 font-inter text-lg leading-6 text-[#c0c0c0]"})]})},ee=({message:s,textBtnA:n,textBtnB:c,functionA:i,functionB:r})=>e.jsxs("div",{className:"text-md fixed bottom-10 right-4 flex flex-col justify-center gap-3 rounded-lg bg-[#444444] px-4 py-3 font-semibold text-[#e3e3e3] z-10",children:[s,e.jsxs("div",{className:"flex justify-end gap-2 font-semibold",children:[e.jsx("button",{className:"rounded-md bg-[#292929] px-2 py-[5px] hover:bg-[#FF6969] hover:text-black",onClick:i,children:n}),e.jsx("button",{className:"rounded-md bg-[#292929] px-2 py-[5px] hover:bg-[#8de86b] hover:text-black",onClick:r,children:c})]})]}),He=({sideBarText:s,clearText:n,newText:c,deleteText:i,readingModeText:r,saveStatusText:o,saveTimeText:f,sideBarFunction:x,clearFunction:m,newFunction:g,deleteFunction:b,readingModeFunction:w,saveStatusFunction:h,enableSave:$,enableDelete:j,enableReadingMode:v})=>e.jsxs("div",{className:"fixed bottom-0 flex w-full justify-between bg-[#3c3e41] px-1 py-[1.5px]",children:[e.jsxs("div",{className:"left-0 flex",children:[e.jsx("button",{className:"mr-4 font-inter text-xs tracking-wider text-white",onClick:x,children:s}),e.jsx("button",{className:"mr-4 font-inter text-xs tracking-wider text-white",onClick:m,children:n}),e.jsx("button",{className:"mr-4 font-inter text-xs tracking-wider text-white",onClick:g,children:c}),e.jsx("button",{className:"font-inter text-xs tracking-wider text-white",onClick:b,disabled:j,children:i})]}),e.jsxs("div",{className:"right-0 flex",children:[e.jsx("button",{className:"mr-4 font-inter text-xs tracking-wider text-white",onClick:w,disabled:v,children:r}),e.jsx("button",{className:"mr-4 font-inter text-xs tracking-wider text-white",onClick:h,disabled:$,children:o}),e.jsxs("p",{className:"font-inter text-xs tracking-wider text-white",children:["Last saved: ",f]})]})]}),qe=({bgColor:s,textA:n,textB:c,lastEditTime:i,keyVal:r,onClick:o})=>e.jsxs("div",{className:`mb-3 w-full items-start justify-center rounded-lg ${s} px-2 py-2 hover:bg-[#4b4b4b]`,onClick:o,children:[e.jsxs("div",{className:"flex justify-between ",children:[e.jsx("p",{className:"text-[#e5e2e2]",children:n}),c&&e.jsxs("p",{className:"text-[#bcbcbc]",children:["#",c]})]}),i&&e.jsxs("p",{className:"text-[#bcbcbc]",children:["Last Edited : ",i]})]},r),Fe=[{id:"btn-bold",title:"bold",description:"set text bold"},{id:"btn-italic",title:"italic",description:"set text italic"},{id:"btn-strike",title:"strike",description:"strikethrough text"},{id:"btn-code",title:"code",description:"highlight text as code"},{id:"btn-bullet",title:"bullet list",description:"highlight text as unordered list"}],Ue=({notesArr:s,handleNoteClick:n,handleCommandClick:c,setShowModal:i})=>{const[r,o]=a.useState([]),[f,x]=a.useState([]),[m,g]=a.useState(""),[b,w]=a.useState(0),[h,$]=a.useState(!0),j=a.useRef(null),v=document.getElementById("scrollContainer");let N;function D(d){let u={_id:"",date:null,title:"",notesContent:""};return u._id=d._id,u.title=d.title,u.notesContent=d.notesContent,u.date=d.date,u}function E(d){let u={id:"",title:"",description:""};return u.id=d.id,u.title=d.title,u.description=d.description,u}const y=a.useCallback(d=>{switch(d.key){case"ArrowDown":d.preventDefault(),w(u=>u===r.length-1?u:u+1);break;case"ArrowUp":d.preventDefault(),w(u=>u===0?u:u-1);break;case"Enter":d.preventDefault(),r[b].type==="note"?n(D(r[b])):c(E(r[b])),i(!1);break}},[r,b]);return a.useEffect(()=>{x([...s.map(d=>({...d,type:"note"})),...Fe.map(d=>({...d,type:"command"}))]),x(d=>(o(d),$(!1),d))},[]),a.useEffect(()=>{j.current&&j.current.focus()},[]),a.useEffect(()=>{o(f.filter(d=>!!d.title.toLowerCase().includes(m.toLowerCase()))),w(0)},[m]),a.useEffect(()=>{if(N=document.getElementById(`item-${b}`),N){const d=N.getBoundingClientRect();d.top>=128&&d.bottom-128<=(v==null?void 0:v.offsetHeight)||N.scrollIntoView({behavior:"smooth",block:"nearest"})}},[b]),a.useEffect(()=>(window.addEventListener("keydown",y),()=>{window.removeEventListener("keydown",y)}),[y]),e.jsx("div",{className:"fixed z-10 flex h-screen w-screen justify-center bg-black/[80%]",children:e.jsxs("div",{className:"mt-12 flex h-[70%] w-1/2 flex-col items-center gap-4 rounded-lg bg-[#333333] p-4",children:[e.jsx("input",{type:"text",className:"flex h-14 w-full items-center rounded-lg bg-[#1e1e1e] px-4 py-3	 text-white",ref:j,placeholder:"Search",value:m,onChange:d=>{g(d.target.value)}}),e.jsx("div",{className:"customScroll flex h-full w-full flex-col overflow-y-auto ",id:"scrollContainer",children:h?e.jsx("div",{children:"Loading"}):r.map((d,u)=>e.jsx("div",{id:`item-${u}`,className:`mb-2 w-full items-start justify-center rounded-lg ${u===b?"bg-[#4b4b4b]":""} px-2 py-2 hover:bg-[#4b4b4b]`,onClick:()=>{d.type==="note"?n(D(d)):c(E(d)),i(!1)},children:e.jsxs("div",{className:"flex justify-between ",children:[e.jsx("p",{className:"text-[#e5e2e2]",children:`(${d.type}) ${d.type==="note"?d.title:d.description}`}),e.jsx("p",{className:"text-[#e5e2e2]",children:`${d.type==="note"?T(d.date).format("dddd, DD MMM YYYY hh:mm A"):d.title}`})]})},u))})]})})},Ve=()=>{const[s,n]=a.useState(""),c=a.useRef(null),i=a.useRef(null),[r,o]=a.useState([]),[f,x]=a.useState([]),[m,g]=a.useState(()=>!(window.innerWidth<=600)),[b,w]=a.useState(!1),[h,$]=a.useState(""),[j,v]=a.useState(null),[N,D]=a.useState(0),[E,y]=a.useState(!1),[d,u]=a.useState("Save"),[be,M]=a.useState(!1),[we,P]=a.useState(!1),[Z,S]=a.useState(""),[A,z]=a.useState(()=>{const l=localStorage.getItem("recentsCount"),p=1e7;return l!==null?parseInt(l,10):(localStorage.setItem("recentsCount",p.toString()),p)}),[ve,U]=a.useState(!1),[je,$e]=a.useState({id:"",status:!0}),Ne=B(),V=K();function W(l,p,k=!1){if(!l)return;const C=T();h!==""?(u("Saving"),I.put(h,{date:C.valueOf(),title:l,notesContent:p}).then(()=>{!k&&v(C),!k&&S(p),x(_=>_.map(O=>O._id===h?{_id:h,notesContent:p,title:l,date:C}:O)),G(),setTimeout(()=>{u("Save Successful!"),setTimeout(()=>{u("Save")},1e3)},1e3)}).catch(()=>{setTimeout(()=>{u("Save Unsuccessful!"),setTimeout(()=>{u("Save")},1e3)},1e3)})):(u("Saving"),I.post("/new",{date:C.valueOf(),title:l,notesContent:p}).then(_=>{!k&&$(_.data.id),!k&&S(p),!k&&v(C),x(O=>[...O,{_id:_.data.id,notesContent:p,title:l,date:C}]),G(),setTimeout(()=>{u("Save Successful!"),setTimeout(()=>{u("Save")},1e3)},1e3)}).catch(()=>{setTimeout(()=>{u("Save Unsuccessful!"),setTimeout(()=>{u("Save")},1e3)},1e3)}))}function ke(){I.delete(h).then(()=>{S(""),n(""),w(!0),i.current.value="",v(null),x(f.filter(l=>l._id!==h)),$(""),console.log("Content Removed Successfully")}).catch(()=>{console.log("An error occurred")}),M(!1)}function ye(){return new Promise(l=>{const p=setInterval(()=>{let k=!0;P(C=>(k=C,C)),k||(clearInterval(p),l("resolve confirmed"))},100)})}function G(){x(l=>l.sort((p,k)=>T(k.date).valueOf()-T(p.date).valueOf()))}const J=a.useCallback(l=>{Z!==s?(P(!0),ye().then(()=>{i.current.value=l.title,n(l.notesContent),S(l.notesContent),$(l._id),w(!0),v(()=>l.date?T(l.date):null)})):(i.current.value=l.title,n(l.notesContent),S(l.notesContent),$(l._id),w(!0),v(()=>l.date?T(l.date):null))},[s,Z]);function Ce(l){$e(p=>({id:l.id,status:!p.status}))}const Q=l=>{l.key==="Escape"&&(U(!1),M(!1),P(!1)),l.ctrlKey&&(l.key==="k"||l.key==="K")&&(l.preventDefault(),U(p=>!p))};return a.useEffect(()=>(window.addEventListener("keydown",Q),()=>{window.removeEventListener("keydown",Q)}),[]),a.useEffect(()=>{y(!0),I.get("/recents").then(l=>{y(!1),x(l.data)}).catch(()=>{y(!1),x([])})},[]),a.useEffect(()=>{V.state!==null&&V.state.noteID!==null&&(I.get("/search/"+V.state.noteID).then(l=>{$(l.data._id),n(l.data.notesContent),w(!0),i.current.value=l.data.title,v(T(l.data.date)),S(l.data.notesContent)}).catch(l=>{console.log("An error occurred",l)}),window.history.replaceState({noteID:null},document.title))},[]),a.useEffect(()=>{localStorage.setItem("recentsCount",A.toString())},[A]),e.jsxs("div",{className:"min-w-screen flex h-screen justify-center",children:[ve&&e.jsx(Ue,{notesArr:f,handleNoteClick:J,handleCommandClick:Ce,setShowModal:U}),be&&e.jsx(ee,{message:"Are you sure you want to delete this note?",textBtnA:"Delete",textBtnB:"Cancel",functionA:ke,functionB:()=>M(!1)}),we&&e.jsx(ee,{message:"Changes made to the note are not saved",textBtnA:"Discard",textBtnB:"Save",functionA:()=>{P(!1)},functionB:()=>{var l,p;(l=i.current)!=null&&l.value&&W((p=i.current)==null?void 0:p.value,s,!0),P(!1)}}),m&&e.jsxs("div",{className:"lg:1/4 md:1/3 flex h-screen w-full flex-col items-center border-r-[1px] border-[#515151] bg-[#1e1e1e] sm:w-2/5",children:[e.jsx("input",{className:"363636 mb-2 mt-8 h-fit w-4/5 rounded-lg bg-[#363636] px-2 py-[7px] text-[17px] font-semibold text-[#dadada]",placeholder:"Search",spellCheck:"false",ref:c,onKeyDown:l=>{l.key==="Enter"&&(o([]),y(!0),D(1),setTimeout(()=>{var p;I.post("/search",{title:(p=c.current)==null?void 0:p.value}).then(k=>{y(!1),o(k.data)}).catch(()=>{y(!1),o([])})},700))}}),e.jsx("div",{className:"flex h-full w-full flex-col items-center overflow-auto",children:e.jsxs("div",{className:"flex h-full w-11/12 flex-col items-start",children:[e.jsxs("div",{className:"mb-2 mt-4 flex w-full items-center justify-between",children:[e.jsxs("div",{className:"flex whitespace-pre-wrap text-sm text-[#a1a1a1]",children:[e.jsxs("button",{className:`${N===0&&"font-semibold text-[#dadada]"}`,onClick:()=>D(0),children:["Recents"," "]})," ","|"," ",e.jsx("button",{className:`${N===1&&"font-semibold text-[#dadada]"}`,onClick:()=>D(1),children:"Results"})]}),e.jsxs("div",{className:"flex whitespace-pre-wrap text-[#a1a1a1]",children:[e.jsxs("button",{className:`${A===5?"text-[#dadada]":""}`,onClick:()=>{z(5)},children:["5"," "]}),e.jsxs("button",{className:`${A===10?"text-[#dadada]":""}`,onClick:()=>{z(10)},children:["10"," "]}),e.jsxs("button",{className:`${A===15?"text-[#dadada]":""}`,onClick:()=>{z(15)},children:["15"," "]}),e.jsxs("button",{className:`${A===1e7?"text-[#dadada]":""}`,onClick:()=>{z(1e7)},children:["INF"," "]})]})]}),e.jsx("div",{className:"customScroll flex h-fit w-full flex-col overflow-auto",children:(N===0?f:r).slice(0,A).map((l,p)=>e.jsx(qe,{onClick:()=>J(l),bgColor:h===l._id?"bg-[#4b4b4b]":"bg-[#333333]",textA:l.title,textB:p+1,keyVal:l._id,lastEditTime:T(l.date).format("DD-MMM, HH:mm")}))}),N===0&&f.length===0||N===1&&r.length===0?e.jsx("div",{className:"mt-4 flex w-11/12 items-center justify-center text-[#a1a1a1]",children:E?"Loading":"Nothing Here"}):e.jsx("div",{className:"flex w-full pt-8"})]})})]}),e.jsx("div",{className:`flex ${m?"w-0 sm:w-3/5 md:w-2/3 lg:w-3/4":"w-full"}`,children:e.jsx(Oe,{title:i,editorValue:s,setEditorValue:n,changeNote:b,setChangeNote:w,btnId:je})}),e.jsx(He,{sideBarText:m?"Hide Sidebar":"Show Sidebar",sideBarFunction:()=>{g(l=>!l)},clearText:"Clear",clearFunction:()=>{o([]),n(""),w(!0),$(""),S(""),i.current.value="",c.current.value="",v(null)},newText:"New",newFunction:()=>{n(""),w(!0),i.current.value="",$(""),S(""),v(null)},deleteText:"Delete",deleteFunction:()=>{M(!0)},enableDelete:h==="",readingModeText:"Reading Mode",readingModeFunction:()=>{var l;Ne(`${h}/reader`,{state:{title:(l=i.current)==null?void 0:l.value,value:s}})},enableReadingMode:h==="",saveStatusText:d,saveStatusFunction:()=>{var l,p;(l=i.current)!=null&&l.value&&W((p=i.current)==null?void 0:p.value,s)},enableSave:d!=="Save",saveTimeText:j===null?"Never":j==null?void 0:j.format("DD-MMM-YYYY | HH:mm")})]})},F=xe();F.register("cpp",de);F.register("py",fe);F.register("js",ue);const Ye=()=>{var f,x;const s=Ie(),n=K(),c=(f=n.state)==null?void 0:f.value,i=(x=n.state)==null?void 0:x.title,r=s.id,o=se({extensions:[ne,le.configure({multicolor:!0}),ae.configure({types:[H.name,re.name]}),H.configure(),ce.configure({bulletList:{keepMarks:!0,keepAttributes:!1},orderedList:{keepMarks:!0,keepAttributes:!1},codeBlock:!1}),ie.configure({languageClassPrefix:"language-",lowlight:F}),ge],content:c,editable:!1});return e.jsxs("div",{className:"min-w-screen flex min-h-screen justify-center bg-[#1f1f1f]",children:[e.jsx(X,{to:"/",state:{noteID:r},className:"fixed bottom-3 left-3 font-inter text-xs font-semibold text-[#e2e2e2]",children:"Back"}),e.jsxs("div",{className:"flex min-h-full w-11/12 flex-col bg-[#363636] px-8 py-6 font-inter text-white sm:w-4/5 md:w-3/4",children:[e.jsx("p",{className:"flex w-1/2 border-b-2 border-[#a3a3a3] bg-transparent text-xl font-semibold text-[#e8e8e8] sm:w-2/5 md:w-1/4",children:i}),e.jsx(oe,{className:"mt-6 text-[#e9e9e9]",editor:o,spellCheck:"false"})]})]})},Xe=/^[a-zA-Z0-9_]+$/,Ke=/^[^\s@]+@[^\s@]+\.[^\s@]+$/,Ze=()=>{const s=a.useRef(null),[n,c]=a.useState("Send email"),[i,r]=a.useState(!1),o=B();return e.jsxs("div",{className:"flex h-screen w-screen items-center justify-center bg-[#1c1c1c]",children:[e.jsx("div",{className:"fixed -top-20 left-20 z-0 rotate-180 -scale-x-100 font-inter text-[150px] font-bold tracking-widest text-[#f1f1f1]",children:"reflections"}),e.jsx("div",{className:"fixed -bottom-20 right-20 z-0 font-inter text-[150px] font-bold tracking-widest text-[#f1f1f1]",children:"reflections"}),e.jsx("div",{className:"z-10 flex w-3/4 flex-col items-center justify-center sm:w-1/2 md:w-[45%] lg:w-1/4",children:e.jsxs("form",{name:"resetpasswordform",onSubmit:f=>{f.preventDefault();let x={};const m=Ke.test(s.current.value),g=Xe.test(s.current.value);m||g?(m?x.email=s.current.value:x.userName=s.current.value,c("Loading..."),L.put("/resetPassword",{...x}).then(()=>{c("Send email"),o("/message",{state:{message:"Password Reset Link has been sent to your mail.",secondaryMessage:"Check your spam folder as well."}})}).catch(()=>{r(!0),console.log("Could not send password reset link")})):r(!0)},children:[e.jsx("div",{className:"mb-8 text-center font-serif text-xl font-bold tracking-tight text-white md:text-2xl lg:text-3xl",children:"Reset your password"}),e.jsx("input",{type:"text",className:"text-md mb-2 w-full rounded-lg bg-[#2e2e2e] p-2 font-serif text-[#f0f8ff] focus:bg-[#2e2e2e] focus:outline-none",placeholder:"Username",autoComplete:"off",ref:s,required:!0,spellCheck:!1}),e.jsx("button",{className:`mt-6 w-full rounded-md bg-[#61a7ec] px-3 py-2 font-serif font-bold ${i?"bg-[#89375f] text-white":"bg-[#61a7ec] text-black"}`,type:"submit",disabled:n!=="Send email",children:n})]})})]})},We=/^[a-zA-Z0-9_]+$/,Ge=/^[^\s@]+@[^\s@]+\.[^\s@]+$/,Je=()=>{const s=a.useRef(null),n=a.useRef(null),[c,i]=a.useState(!1),[r,o]=a.useState("Sign in"),f=B();return e.jsxs("div",{className:"flex h-screen w-screen items-center justify-center bg-[#1c1c1c]",children:[e.jsx("div",{className:"fixed -top-20 left-20 z-0 rotate-180 -scale-x-100 font-inter text-[150px] font-bold tracking-widest text-[#f1f1f1]",children:"reflections"}),e.jsx("div",{className:"fixed -bottom-20 right-20 z-0 font-inter text-[150px] font-bold tracking-widest text-[#f1f1f1]",children:"reflections"}),e.jsx("div",{className:"z-10 flex w-3/4 flex-col items-center justify-center sm:w-1/2 md:w-[45%] lg:w-1/4",children:e.jsxs("form",{name:"loginform",onSubmit:x=>{var w;x.preventDefault();let m={};const g=Ge.test(s.current.value),b=We.test(s.current.value);g||b?(g?m.email=s.current.value:m.userName=s.current.value,o("Loading..."),L.post("/login",{...m,password:(w=n.current)==null?void 0:w.value}).then(h=>{o("Sign in"),h.data.accessToken&&(localStorage.setItem("accessToken",h.data.accessToken),localStorage.setItem("userName",s.current.value),f("/"))}).catch(h=>{console.log(h.response.data.message),o("Sign in"),i(!0)})):i(!0)},children:[e.jsx("div",{className:"mb-8 w-full justify-center text-center font-serif text-2xl font-bold tracking-tight text-white md:text-2xl lg:text-3xl",children:"Sign in to your Account"}),e.jsx("input",{type:"text",className:"text-md mb-2 w-full rounded-lg bg-[#2e2e2e] p-2 font-serif text-[#f0f8ff] focus:bg-[#2e2e2e] focus:outline-none",placeholder:"Username",autoComplete:"username",ref:s,required:!0,spellCheck:!1}),e.jsx("input",{type:"password",className:"text-md w-full rounded-lg bg-[#2e2e2e] p-2 font-serif text-[#f0f8ff] focus:bg-[#2e2e2e] focus:outline-none",placeholder:"Password",autoComplete:"current-password",ref:n,required:!0,spellCheck:!1}),e.jsx("button",{className:`text-md mt-6 w-full rounded-md ${c?"bg-[#89375f] text-white":"bg-[#61a7ec] text-black"} px-3 py-2 font-serif font-bold `,type:"submit",disabled:r!=="Sign in",children:r}),e.jsx("div",{className:"mt-1 flex w-full justify-end",children:e.jsx(X,{className:"font-serif text-xs text-[#e9e9e9]",to:"/resetPassword",children:"Forgot Password"})}),e.jsx("div",{className:"w-full text-center",children:e.jsxs("p",{className:"mt-5 font-serif text-sm font-semibold text-[#e9e9e9]",children:["Don't have an account yet,"," ",e.jsx(X,{className:"font-bold text-white",to:"/signup",children:"sign up."})]})})]})})]})},Qe=/^[a-zA-Z\s]+$/,et=/^[a-zA-Z0-9_]+$/,tt=/^[^\s@]+@[^\s@]+\.[^\s@]+$/,st=()=>{const s=a.useRef(null),n=a.useRef(null),c=a.useRef(null),i=a.useRef(null),[r,o]=a.useState("Sign up"),[f,x]=a.useState(!1),m=B();return e.jsxs("div",{className:"flex h-screen w-screen items-center justify-center bg-[#1c1c1c]",children:[e.jsx("div",{className:"fixed -top-20 left-20 z-0 rotate-180 -scale-x-100 font-inter text-[150px] font-bold tracking-widest text-[#f1f1f1]",children:"reflections"}),e.jsx("div",{className:"fixed -bottom-20 right-20 z-0 font-inter text-[150px] font-bold tracking-widest text-[#f1f1f1]",children:"reflections"}),e.jsx("div",{className:"z-10 flex w-3/4 flex-col items-center justify-center sm:w-1/2 md:w-[45%] lg:w-1/4",children:e.jsxs("form",{name:"signupform",onSubmit:g=>{g.preventDefault(),Qe.test(s.current.value)&&tt.test(n.current.value)&&et.test(c.current.value)?(o("Loading..."),L.post("/new",{name:s.current.value,email:n.current.value,userName:c.current.value,password:i.current.value}).then(()=>{o("Sign up"),m("/login")}).catch(b=>{console.log(b.response.data.message),x(!0),o("Sign up")})):x(!0)},children:[e.jsx("div",{className:"mb-8 text-center font-serif text-xl font-bold tracking-tight text-white md:text-2xl lg:text-3xl",children:"Create a New Account"}),e.jsx("input",{type:"text",className:"text-md mb-2 w-full rounded-lg bg-[#2e2e2e] p-2 font-serif text-[#f0f8ff] focus:bg-[#2e2e2e] focus:outline-none",placeholder:"Name",autoComplete:"off",ref:s,required:!0,spellCheck:!1}),e.jsx("input",{type:"email",className:"text-md mb-2 w-full rounded-lg bg-[#2e2e2e] p-2 font-serif text-[#f0f8ff] focus:bg-[#2e2e2e] focus:outline-none",placeholder:"Email",autoComplete:"off",ref:n,required:!0,spellCheck:!1}),e.jsx("input",{type:"text",className:"text-md mb-2 w-full rounded-lg bg-[#2e2e2e] p-2 font-serif text-[#f0f8ff] focus:bg-[#2e2e2e] focus:outline-none",placeholder:"Username",autoComplete:"username",ref:c,required:!0,spellCheck:!1}),e.jsx("input",{type:"password",className:"text-md w-full rounded-lg bg-[#2e2e2e] p-2 font-serif text-[#f0f8ff] focus:bg-[#2e2e2e] focus:outline-none",placeholder:"Password",autoComplete:"current-password",ref:i,required:!0,spellCheck:!1}),e.jsx("button",{className:`mt-6 w-full rounded-md bg-[#61a7ec] px-3 py-2 font-serif font-bold ${f?"bg-[#89375f] text-white":"bg-[#61a7ec] text-black"}`,type:"submit",disabled:r!=="Sign up",children:r})]})})]})},nt=()=>{const s=B();return a.useEffect(()=>{setTimeout(()=>{s("/",{replace:!0})},3e3)},[]),e.jsxs("div",{className:"flex h-screen w-screen flex-col items-center justify-center bg-[#1c1c1c]",children:[e.jsx("p",{className:"font-serif text-4xl font-semibold text-white md:text-5xl lg:text-7xl",children:"404 Not Found"}),e.jsx("p",{className:"font-serif text-lg font-medium text-white md:text-xl lg:text-2xl",children:"The page you are looking for does not exist."})]})},lt=()=>{const[s,n]=Pe(),c=a.useRef(null),i=a.useRef(null),[r,o]=a.useState("Change Password"),[f,x]=a.useState(!1),[m,g]=a.useState(!0),b=B(),w=s.get("resetToken"),[h,$]=a.useState("");return a.useEffect(()=>{x(!0),L.post("/checkResetToken",{resetToken:w}).then(j=>{console.log("Valid reset token"),g(!1),$(j.data.id),x(!1)}).catch(()=>{b("/message",{state:{message:"This link is no longer valid."}})})},[]),e.jsxs("div",{className:"flex h-screen w-screen items-center justify-center bg-[#1c1c1c]",children:[e.jsx("div",{className:"fixed -top-20 left-20 z-0 rotate-180 -scale-x-100 font-inter text-[150px] font-bold tracking-widest text-[#f1f1f1]",children:"reflections"}),e.jsx("div",{className:"fixed -bottom-20 right-20 z-0 font-inter text-[150px] font-bold tracking-widest text-[#f1f1f1]",children:"reflections"}),e.jsx("div",{className:"z-10 flex w-3/4 flex-col items-center justify-center sm:w-1/2 md:w-[45%] lg:w-1/4",children:e.jsxs("form",{name:"updatepasswordform",onSubmit:j=>{var v;j.preventDefault(),c.current.value===i.current.value?(o("Loading..."),L.put("/updatePassword",{id:h,password:(v=c.current)==null?void 0:v.value}).then(()=>{console.log("Password updated"),o("Change Password"),b("/message",{state:{message:"Password has been updated successfully.",secondaryMessage:"Log in to your account with the new password."}})}).catch(N=>{console.log("Password could not updated"),console.log(N),g(!0),o("Change Password")})):g(!0)},children:[e.jsx("div",{className:"mb-8 text-center font-serif text-xl font-bold tracking-tight text-white md:text-2xl lg:text-3xl",children:"Update your password"}),e.jsx("input",{type:"password",className:"text-md mb-2 w-full rounded-lg bg-[#2e2e2e] p-2 font-serif text-[#f0f8ff] focus:bg-[#2e2e2e] focus:outline-none",placeholder:"Password",autoComplete:"off",ref:c,required:!0,disabled:f,spellCheck:!1}),e.jsx("input",{type:"password",className:"text-md w-full rounded-lg bg-[#2e2e2e] p-2 font-serif text-[#f0f8ff] focus:bg-[#2e2e2e] focus:outline-none",placeholder:"Confirm Password",autoComplete:"off",ref:i,required:!0,disabled:f,spellCheck:!1}),e.jsx("button",{className:`mt-6 w-full rounded-md bg-[#61a7ec] px-3 py-2 font-serif font-bold ${m?"bg-[#89375f] text-white":"bg-[#61a7ec] text-black"}`,type:"submit",disabled:r!=="Change Password"&&f,children:r})]})})]})},at=()=>{const s=K(),n=s.state.message,c=s.state.secondaryMessage;return e.jsxs("div",{className:"flex h-screen w-screen items-center justify-center bg-[#1c1c1c]",children:[e.jsx("div",{className:"fixed -top-20 left-20 z-0 rotate-180 -scale-x-100 font-inter text-[150px] font-bold tracking-widest text-[#f1f1f1]",children:"reflections"}),e.jsx("div",{className:"fixed -bottom-20 right-20 z-0 font-inter text-[150px] font-bold tracking-widest text-[#f1f1f1]",children:"reflections"}),e.jsxs("div",{className:"z-10 flex w-4/5 flex-col items-center justify-center",children:[e.jsx("div",{className:"text-md flex h-full w-full items-center justify-center text-center font-serif font-semibold text-white sm:text-xl",children:n}),c&&e.jsx("div",{className:"mt-1 flex h-full w-full items-center justify-center text-center font-serif text-sm font-medium text-[#f1f1f1] sm:text-lg",children:c})]})]})};function rt(){return e.jsxs(Le,{children:[e.jsx(R,{path:"/",element:e.jsx(Ve,{})}),e.jsx(R,{path:"/:id/reader",element:e.jsx(Ye,{})}),e.jsx(R,{path:"/login",element:e.jsx(Je,{})}),e.jsx(R,{path:"/signup",element:e.jsx(st,{})}),e.jsx(R,{path:"/updatePassword",element:e.jsx(lt,{})}),e.jsx(R,{path:"/resetPassword",element:e.jsx(Ze,{})}),e.jsx(R,{path:"/message",element:e.jsx(at,{})}),e.jsx(R,{path:"*",element:e.jsx(nt,{})})]})}Ae.createRoot(document.getElementById("root")).render(e.jsx(Ee,{children:e.jsx(Te.StrictMode,{children:e.jsx(rt,{})})}));
