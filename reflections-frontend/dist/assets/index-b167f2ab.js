var be=Object.defineProperty;var ve=(s,l,r)=>l in s?be(s,l,{enumerable:!0,configurable:!0,writable:!0,value:r}):s[l]=r;var U=(s,l,r)=>(ve(s,typeof l!="symbol"?l+"":l,r),r);import{r as a,j as e,R as we}from"./react-d39729e7.js";import{c as je}from"./react-dom-eb291ab4.js";import{d as k}from"./dayjs-afe83796.js";import{a as W}from"./axios-28bc18a3.js";import{o as $e}from"./jwt-decode-9c18df67.js";import{E as Ne,t,u as G,T as J,H as Q,C as ee,a as M,L as te,S as se,b as ne,c as le}from"./@tiptap-858bdebf.js";import{c as ae,p as re,j as ce}from"./highlight.js-ce00471d.js";import{c as oe}from"./lowlight-f028c058.js";import{a as P,b as X,d as ke,e as ye,f as T}from"./react-router-6ab5a7f0.js";import{L as F,u as Ce,B as Se}from"./react-router-dom-7f7eab61.js";import"./scheduler-765c72db.js";import"./prosemirror-state-d99efc48.js";import"./prosemirror-model-714031c1.js";import"./orderedmap-1b52af60.js";import"./prosemirror-transform-4fc52813.js";import"./prosemirror-view-799f8507.js";import"./prosemirror-keymap-8634b7a8.js";import"./w3c-keyname-a25e4cc1.js";import"./prosemirror-commands-175c63be.js";import"./prosemirror-schema-list-771d4f75.js";import"./prosemirror-dropcursor-da1713bb.js";import"./prosemirror-gapcursor-b46cb10f.js";import"./prosemirror-history-1f4dfada.js";import"./rope-sequence-5ceeafee.js";import"./@remix-run-1dd2da88.js";(function(){const l=document.createElement("link").relList;if(l&&l.supports&&l.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const f of c.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&i(f)}).observe(document,{childList:!0,subtree:!0});function r(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerPolicy&&(c.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?c.credentials="include":o.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function i(o){if(o.ep)return;o.ep=!0;const c=r(o);fetch(o.href,c)}})();class Re{constructor(l,r){U(this,"endpoint");U(this,"apiClient");this.endpoint=l,this.apiClient=r}get(l){return this.apiClient.get(this.endpoint+l)}post(l,r){return this.apiClient.post(this.endpoint+l,r)}put(l,r){return this.apiClient.put(this.endpoint+"/"+l,r)}delete(l){return this.apiClient.delete(this.endpoint+"/"+l)}}const ie=(s,l)=>new Re(s,l),Te=()=>de.post("/api/user/refresh"),de=W.create({baseURL:""}),fe=W.create({baseURL:"",withCredentials:!0});fe.interceptors.request.use(s=>{const l=localStorage.getItem("accessToken"),r=new Date;let i,o;return l&&(i=$e(l),o=i.exp),o&&o*1e3<r.getTime()||!l?Te().then(f=>{f.data.accessToken&&(localStorage.setItem("accessToken",f.data.accessToken),s.headers.Authorization=`Bearer ${f.data.accessToken}`)}).catch(()=>{console.log("Session Expired/No access token"),window.location.href="/login"}):s.headers.Authorization=`Bearer ${l}`,s});const D=ie("/api/content",fe),I=ie("/api/user",de),ue=Ne.create({name:"smilieReplacer",addInputRules(){return[t({find:/-___- $/,replace:"😑 "}),t({find:/:'-\) $/,replace:"😂 "}),t({find:/':-\) $/,replace:"😅 "}),t({find:/':-D $/,replace:"😅 "}),t({find:/>:-\) $/,replace:"😆 "}),t({find:/-__- $/,replace:"😑 "}),t({find:/':-\( $/,replace:"😓 "}),t({find:/:'-\( $/,replace:"😢 "}),t({find:/>:-\( $/,replace:"😠 "}),t({find:/O:-\) $/,replace:"😇 "}),t({find:/0:-3 $/,replace:"😇 "}),t({find:/0:-\) $/,replace:"😇 "}),t({find:/0;\^\) $/,replace:"😇 "}),t({find:/O;-\) $/,replace:"😇 "}),t({find:/0;-\) $/,replace:"😇 "}),t({find:/O:-3 $/,replace:"😇 "}),t({find:/:'\) $/,replace:"😂 "}),t({find:/:-D $/,replace:"😃 "}),t({find:/':\) $/,replace:"😅 "}),t({find:/'=\) $/,replace:"😅 "}),t({find:/':D $/,replace:"😅 "}),t({find:/'=D $/,replace:"😅 "}),t({find:/>:\) $/,replace:"😆 "}),t({find:/>;\) $/,replace:"😆 "}),t({find:/>=\) $/,replace:"😆 "}),t({find:/;-\) $/,replace:"😉 "}),t({find:/\*-\) $/,replace:"😉 "}),t({find:/;-\] $/,replace:"😉 "}),t({find:/;\^\) $/,replace:"😉 "}),t({find:/B-\) $/,replace:"😎 "}),t({find:/8-\) $/,replace:"😎 "}),t({find:/B-D $/,replace:"😎 "}),t({find:/8-D $/,replace:"😎 "}),t({find:/:-\* $/,replace:"😘 "}),t({find:/:\^\* $/,replace:"😘 "}),t({find:/:-\) $/,replace:"🙂 "}),t({find:/-_- $/,replace:"😑 "}),t({find:/:-X $/,replace:"😶 "}),t({find:/:-# $/,replace:"😶 "}),t({find:/:-x $/,replace:"😶 "}),t({find:/>.< $/,replace:"😣 "}),t({find:/:-O $/,replace:"😮 "}),t({find:/:-o $/,replace:"😮 "}),t({find:/O_O $/,replace:"😮 "}),t({find:/>:O $/,replace:"😮 "}),t({find:/:-P $/,replace:"😛 "}),t({find:/:-p $/,replace:"😛 "}),t({find:/:-Þ $/,replace:"😛 "}),t({find:/:-þ $/,replace:"😛 "}),t({find:/:-b $/,replace:"😛 "}),t({find:/>:P $/,replace:"😜 "}),t({find:/X-P $/,replace:"😜 "}),t({find:/x-p $/,replace:"😜 "}),t({find:/':\( $/,replace:"😓 "}),t({find:/'=\( $/,replace:"😓 "}),t({find:/>:\\ $/,replace:"😕 "}),t({find:/>:\/ $/,replace:"😕 "}),t({find:/:-\/ $/,replace:"😕 "}),t({find:/:-. $/,replace:"😕 "}),t({find:/>:\[ $/,replace:"😞 "}),t({find:/:-\( $/,replace:"😞 "}),t({find:/:-\[ $/,replace:"😞 "}),t({find:/:'\( $/,replace:"😢 "}),t({find:/;-\( $/,replace:"😢 "}),t({find:/#-\) $/,replace:"😵 "}),t({find:/%-\) $/,replace:"😵 "}),t({find:/X-\) $/,replace:"😵 "}),t({find:/>:\( $/,replace:"😠 "}),t({find:/0:3 $/,replace:"😇 "}),t({find:/0:\) $/,replace:"😇 "}),t({find:/O:\) $/,replace:"😇 "}),t({find:/O=\) $/,replace:"😇 "}),t({find:/O:3 $/,replace:"😇 "}),t({find:/<\/3 $/,replace:"💔 "}),t({find:/:D $/,replace:"😃 "}),t({find:/=D $/,replace:"😃 "}),t({find:/;\) $/,replace:"😉 "}),t({find:/\*\) $/,replace:"😉 "}),t({find:/;\] $/,replace:"😉 "}),t({find:/;D $/,replace:"😉 "}),t({find:/B\) $/,replace:"😎 "}),t({find:/8\) $/,replace:"😎 "}),t({find:/:\* $/,replace:"😘 "}),t({find:/=\* $/,replace:"😘 "}),t({find:/:\) $/,replace:"🙂 "}),t({find:/=\] $/,replace:"🙂 "}),t({find:/=\) $/,replace:"🙂 "}),t({find:/:\] $/,replace:"🙂 "}),t({find:/:X $/,replace:"😶 "}),t({find:/:# $/,replace:"😶 "}),t({find:/=X $/,replace:"😶 "}),t({find:/=x $/,replace:"😶 "}),t({find:/:x $/,replace:"😶 "}),t({find:/=# $/,replace:"😶 "}),t({find:/:O $/,replace:"😮 "}),t({find:/:o $/,replace:"😮 "}),t({find:/:P $/,replace:"😛 "}),t({find:/=P $/,replace:"😛 "}),t({find:/:p $/,replace:"😛  "}),t({find:/=p $/,replace:"😛 "}),t({find:/:Þ $/,replace:"😛 "}),t({find:/:þ $/,replace:"😛 "}),t({find:/:b $/,replace:"😛 "}),t({find:/d: $/,replace:"😛 "}),t({find:/:\/ $/,replace:"😕 "}),t({find:/:\\ $/,replace:"😕 "}),t({find:/=\/ $/,replace:"😕 "}),t({find:/=\\ $/,replace:"😕 "}),t({find:/:L $/,replace:"😕 "}),t({find:/=L $/,replace:"😕 "}),t({find:/:\( $/,replace:"😞 "}),t({find:/:\[ $/,replace:"😞 "}),t({find:/=\( $/,replace:"😞 "}),t({find:/;\( $/,replace:"😢 "}),t({find:/D: $/,replace:"😨 "}),t({find:/:\$ $/,replace:"😳 "}),t({find:/=\$ $/,replace:"😳 "}),t({find:/#\) $/,replace:"😵 "}),t({find:/%\) $/,replace:"😵 "}),t({find:/X\) $/,replace:"😵 "}),t({find:/:@ $/,replace:"😠 "}),t({find:/<3 $/,replace:"❤️ "}),t({find:/\/shrug $/,replace:"¯\\_(ツ)_/¯"})]}});const O=oe();O.register("cpp",ae);O.register("py",re);O.register("js",ce);const Pe=({editor:s})=>{if(!s)return null;const l=P();return e.jsx("div",{className:"flex justify-center text-[17px]",children:e.jsxs("div",{className:"customScroll mx-8 mt-8 flex gap-1 overflow-auto rounded-lg bg-[#363636] px-1 py-[5px] text-[#a1a1a1]",children:[e.jsx("button",{onClick:()=>s.chain().focus().toggleBold().run(),disabled:!s.can().chain().focus().toggleBold().run(),className:`flex ${s.isActive("bold")?"is-active":""} rounded-md px-2 py-0.5`,children:"bold"}),e.jsx("button",{onClick:()=>s.chain().focus().toggleItalic().run(),disabled:!s.can().chain().focus().toggleItalic().run(),className:`flex ${s.isActive("italic")?"is-active":""} rounded-md px-2 py-0.5 `,children:"italic"}),e.jsx("button",{onClick:()=>s.chain().focus().toggleStrike().run(),disabled:!s.can().chain().focus().toggleStrike().run(),className:`flex ${s.isActive("strike")?"is-active":""} rounded-md px-2 py-0.5`,children:"strike"}),e.jsx("button",{onClick:()=>s.chain().focus().toggleCode().run(),disabled:!s.can().chain().focus().toggleCode().run(),className:`flex ${s.isActive("code")?"is-active":""} rounded-md px-2 py-0.5 `,children:"code"}),e.jsx("button",{onClick:()=>s.chain().focus().setParagraph().run(),className:`${s.isActive("paragraph")?"is-active":""} flex rounded-md px-2 py-0.5 `,children:"paragraph"}),e.jsx("button",{onClick:()=>s.chain().focus().toggleBulletList().run(),className:`${s.isActive("bulletList")?"is-active":""} flex rounded-md px-2 py-0.5 `,children:"bulletlist"}),e.jsx("button",{onClick:()=>s.chain().focus().toggleOrderedList().run(),className:`${s.isActive("orderedList")?"is-active":""} rounded-md    px-2 py-0.5 `,children:"orderedlist"}),e.jsx("button",{onClick:()=>s.chain().focus().toggleCodeBlock().run(),className:`${s.isActive("codeBlock")?"is-active":""} flex rounded-md px-2 py-0.5 `,children:"codeblock"}),e.jsx("button",{onClick:()=>s.chain().focus().toggleBlockquote().run(),className:`${s.isActive("blockquote")?"is-active":""} flex rounded-md px-2 py-0.5 `,children:"blockquote"}),e.jsx("button",{onClick:()=>s.chain().focus().setHorizontalRule().run(),className:"flex rounded-md px-2 py-0.5  ",children:"horizontalrule"}),e.jsx("button",{onClick:()=>s.chain().focus().toggleHeading({level:3}).run(),className:`${s.isActive("heading",{level:3})?"is-active":""} flex rounded-md px-2 py-0.5 `,children:"h1"}),e.jsx("button",{onClick:()=>s.chain().focus().toggleHeading({level:4}).run(),className:`${s.isActive("heading",{level:4})?"is-active":""} flex rounded-md px-2 py-0.5 `,children:"h2"}),e.jsx("button",{onClick:()=>s.chain().focus().toggleHighlight({color:"#b197fc"}).setColor(s!=null&&s.isActive("highlight",{color:"#b197fc"})?"":"#000000").run(),className:`${s.isActive("highlight",{color:"#b197fc"})?"is-active":""}
				flex rounded-md px-2 py-0.5`,children:"purple"}),e.jsx("button",{onClick:()=>s.chain().focus().toggleHighlight({color:"#74c0fc"}).setColor(s!=null&&s.isActive("highlight",{color:"#74c0fc"})?"":"#000000").run(),className:`${s.isActive("highlight",{color:"#74c0fc"})?"is-active":""} flex rounded-md px-2 py-0.5`,children:"blue"}),e.jsx("button",{onClick:()=>s.chain().focus().toggleHighlight({color:"#0ec3ac"}).setColor(s!=null&&s.isActive("highlight",{color:"#0ec3ac"})?"":"#000000").run(),className:`${s.isActive("highlight",{color:"#0ec3ac"})?"is-active":""} flex rounded-md px-2 py-0.5`,children:"teal"}),e.jsx("button",{onClick:()=>s.chain().focus().unsetAllMarks().run(),className:"flex rounded-md px-2 py-0.5  ",children:"clearmarks"}),e.jsx("button",{onClick:()=>s.chain().focus().clearNodes().run(),className:"flex rounded-md px-2 py-0.5  ",children:"clearnodes"}),e.jsx("button",{onClick:()=>s.chain().focus().undo().run(),disabled:!s.can().chain().focus().undo().run(),className:"flex rounded-md px-2 py-0.5  ",children:"undo"}),e.jsx("button",{onClick:()=>s.chain().focus().redo().run(),disabled:!s.can().chain().focus().redo().run(),className:"flex rounded-md px-2 py-0.5  ",children:"redo"}),e.jsx("button",{className:"logoutBtn flex rounded-md px-2 py-0.5 hover:border-0 hover:bg-[#da6888] hover:text-stone-900",onClick:()=>{I.get("/logout"),localStorage.removeItem("userName"),localStorage.removeItem("recentsCount"),localStorage.removeItem("accessToken"),l("/login")},children:"logout"})]})})},Le=({editorValue:s,setEditorValue:l,title:r,changeNote:i,setChangeNote:o})=>{const c=G({extensions:[J,Q.configure({multicolor:!0}),ee.configure({types:[M.name,te.name]}),M.configure(),se.configure({bulletList:{keepMarks:!0,keepAttributes:!1},orderedList:{keepMarks:!0,keepAttributes:!1},codeBlock:!1,dropcursor:!1,gapcursor:!1,hardBreak:!1}),ue,ne.configure({languageClassPrefix:"language-",lowlight:O})],onUpdate:({editor:u})=>{const m=u.getHTML();f(m)},content:s,editable:!0});a.useEffect(()=>{i&&(c==null||c.commands.setContent(s),o(!1))},[i]);const f=u=>{l(u)};return e.jsxs("div",{className:"customScroll flex h-full w-full flex-col gap-5 overflow-auto bg-[#1f1f1f]",children:[e.jsx(Pe,{editor:c}),e.jsx("input",{className:"mx-8 mt-8 flex w-1/2 border-b-2 border-[#515151] bg-transparent text-xl font-semibold text-[#dadada] sm:w-2/5 md:w-1/4",placeholder:"title goes here",ref:r,spellCheck:"false"}),e.jsx(le,{spellCheck:!1,editor:c,className:"customScroll mx-8 mb-12 mt-2 font-inter text-lg leading-6 text-[#c0c0c0]"})]})},Ae=()=>{const[s,l]=a.useState(""),r=a.useRef(null),i=a.useRef(null),[o,c]=a.useState([]),[f,u]=a.useState([]),[m,w]=a.useState(()=>!(window.innerWidth<=600)),[y,b]=a.useState(!1),[x,$]=a.useState(""),[C,v]=a.useState(null),[S,H]=a.useState(0),[xe,L]=a.useState(!1),[V,N]=a.useState("Save"),[pe,_]=a.useState(!1),[me,A]=a.useState(!1),[Ye,j]=a.useState(""),[R,B]=a.useState(()=>{const n=localStorage.getItem("recentsCount"),d=1e7;return n!==null?parseInt(n,10):(localStorage.setItem("recentsCount",d.toString()),d)}),he=P(),q=X(),K=(n,d,p=!1)=>{if(!n)return;const g=k();x!==""?(N("Saving"),D.put(x,{date:g.valueOf(),title:n,notesContent:d}).then(()=>{!p&&v(g),!p&&j(d),u(h=>h.map(E=>E._id===x?{_id:x,notesContent:d,title:n,date:g}:E)),Z(),setTimeout(()=>{N("Save Successful!"),setTimeout(()=>{N("Save")},1e3)},1e3)}).catch(()=>{setTimeout(()=>{N("Save Unsuccessful!"),setTimeout(()=>{N("Save")},1e3)},1e3)})):(N("Saving"),D.post("/new",{date:g.valueOf(),title:n,notesContent:d}).then(h=>{!p&&$(h.data.id),!p&&j(d),!p&&v(g),u(E=>[...E,{_id:h.data.id,notesContent:d,title:n,date:g}]),Z(),setTimeout(()=>{N("Save Successful!"),setTimeout(()=>{N("Save")},1e3)},1e3)}).catch(()=>{setTimeout(()=>{N("Save Unsuccessful!"),setTimeout(()=>{N("Save")},1e3)},1e3)}))};function ge(){D.delete(x).then(()=>{j(""),l(""),b(!0),i.current.value="",v(null),u(f.filter(n=>n._id!==x)),$(""),console.log("Content Removed Successfully")}).catch(()=>{console.log("An error occurred")}),_(!1)}function Y(){return new Promise(n=>{const d=setInterval(()=>{let p=!0;A(g=>(p=g,g)),p||(clearInterval(d),n("resolve confirmed"))},100)})}function Z(){u(n=>n.sort((d,p)=>k(p.date).valueOf()-k(d.date).valueOf()))}return a.useEffect(()=>{L(!0),D.get("/recents").then(n=>{L(!1),u(n.data)}).catch(()=>{L(!1),u([])})},[]),a.useEffect(()=>{q.state!==null&&q.state.noteID!==null&&(D.get("/search/"+q.state.noteID).then(n=>{$(n.data._id),l(n.data.notesContent),b(!0),i.current.value=n.data.title,v(k(n.data.date)),j(n.data.notesContent)}).catch(n=>{console.log("An error occurred",n)}),window.history.replaceState({noteID:null},document.title))},[]),a.useEffect(()=>{localStorage.setItem("recentsCount",R.toString())},[R]),e.jsxs("div",{className:"min-w-screen flex h-screen justify-center",onKeyDown:n=>{n.key==="Escape"&&(_(!1),A(!1))},children:[pe&&e.jsxs("div",{className:"text-md fixed bottom-10 right-4 flex flex-col justify-center gap-3 rounded-lg bg-[#444444] px-4 py-3 font-semibold text-[#e3e3e3]",children:["Are you sure you want to delete this note?",e.jsxs("div",{className:"flex justify-end gap-2 font-semibold",children:[e.jsx("button",{className:"rounded-md bg-[#292929] px-2 py-[5px] hover:bg-[#FF6969] hover:text-black",onClick:ge,children:"Delete"}),e.jsx("button",{className:"rounded-md bg-[#292929] px-2 py-[5px] hover:bg-[#8de86b] hover:text-black",onClick:()=>_(!1),children:"Cancel"})]})]}),me&&e.jsxs("div",{className:"text-md fixed bottom-10 right-4 flex flex-col justify-center gap-3 rounded-lg bg-[#444444] px-4 py-3 font-semibold text-[#e3e3e3]",children:["Changes made to the note are not saved",e.jsxs("div",{className:"flex justify-end gap-2 font-semibold",children:[e.jsx("button",{className:"rounded-md bg-[#292929] px-2 py-[5px] hover:bg-[#FF6969] hover:text-black",onClick:()=>{A(!1)},children:"Discard"}),e.jsx("button",{className:"rounded-md bg-[#292929] px-2 py-[5px] hover:bg-[#8de86b] hover:text-black",onClick:()=>{var n,d;(n=i.current)!=null&&n.value&&K((d=i.current)==null?void 0:d.value,s,!0),A(!1)},children:"Save"})]})]}),m&&e.jsxs("div",{className:"lg:1/4 md:1/3 flex h-screen w-3/4 flex-col items-center border-r-[1px] border-[#515151] bg-[#1f1f1f] sm:w-2/5",children:[e.jsx("input",{className:"363636 mb-2 mt-8 h-fit w-4/5 rounded-lg bg-[#363636] px-2 py-[7px] text-[17px] font-semibold text-[#dadada]",placeholder:"Search",spellCheck:"false",ref:r,onKeyDown:n=>{n.key==="Enter"&&(c([]),L(!0),H(1),setTimeout(()=>{var d;D.post("/search",{title:(d=r.current)==null?void 0:d.value}).then(p=>{L(!1),c(p.data)}).catch(()=>{L(!1),c([])})},700))}}),e.jsx("div",{className:"flex h-full w-full flex-col items-center overflow-auto",children:e.jsxs("div",{className:"flex h-full w-11/12 flex-col items-start",children:[e.jsxs("div",{className:"mb-2 mt-4 flex w-full items-center justify-between",children:[e.jsxs("div",{className:"flex whitespace-pre-wrap text-sm text-[#a1a1a1]",children:[e.jsxs("button",{className:`${S===0&&"font-semibold text-[#dadada]"}`,onClick:()=>H(0),children:["Recents"," "]})," ","|"," ",e.jsx("button",{className:`${S===1&&"font-semibold text-[#dadada]"}`,onClick:()=>H(1),children:"Results"})]}),e.jsxs("div",{className:"flex whitespace-pre-wrap text-[#a1a1a1]",children:[e.jsxs("button",{className:`${R===5?"text-[#dadada]":""}`,onClick:()=>{B(5)},children:["5"," "]}),e.jsxs("button",{className:`${R===10?"text-[#dadada]":""}`,onClick:()=>{B(10)},children:["10"," "]}),e.jsxs("button",{className:`${R===15?"text-[#dadada]":""}`,onClick:()=>{B(15)},children:["15"," "]}),e.jsxs("button",{className:`${R===1e7?"text-[#dadada]":""}`,onClick:()=>{B(1e7)},children:["INF"," "]})]})]}),e.jsx("div",{className:"customScroll flex h-fit w-full flex-col overflow-auto",children:S===1&&o.map((n,d)=>{if(d<R)return e.jsxs("div",{className:`mb-3 w-full items-start justify-center rounded-lg ${x===n._id?"bg-[#4b4b4b]":""} bg-[#333333] px-2 py-2 hover:bg-[#4b4b4b]`,onClick:()=>{let p="",g="";j(h=>(p=h,h)),l(h=>(g=h,h)),p!==g?(A(!0),Y().then(()=>{i.current.value=n.title,l(n.notesContent),j(n.notesContent),$(n._id),b(!0),v(()=>n.date?k(n.date):null)})):(i.current.value=n.title,l(n.notesContent),j(n.notesContent),$(n._id),b(!0),v(()=>n.date?k(n.date):null))},children:[e.jsxs("div",{className:"flex justify-between ",children:[e.jsx("p",{className:"text-[#e5e2e2]",children:n.title}),e.jsxs("p",{className:"text-[#bcbcbc]",children:["#",d+1]})]}),e.jsxs("p",{className:"text-[#bcbcbc]",children:["Last Edited :"," ",k(n.date).format("DD-MMM, HH:mm")]})]},n._id)})}),e.jsx("div",{className:"customScroll flex h-fit w-full flex-col overflow-auto",children:S===0&&f.map((n,d)=>{if(d<R)return e.jsxs("div",{className:`mb-3 w-full items-start justify-center rounded-lg ${x===n._id?"bg-[#4b4b4b]":""} bg-[#333333] px-2 py-2 hover:bg-[#4b4b4b]`,onClick:()=>{let p="",g="";j(h=>(p=h,h)),l(h=>(g=h,h)),p!==g?(A(!0),Y().then(()=>{i.current.value=n.title,l(n.notesContent),j(n.notesContent),$(n._id),b(!0),v(()=>n.date?k(n.date):null)})):(i.current.value=n.title,l(n.notesContent),j(n.notesContent),$(n._id),b(!0),v(()=>n.date?k(n.date):null))},children:[e.jsxs("div",{className:"flex justify-between ",children:[e.jsx("p",{className:"text-[#e5e2e2]",children:n.title}),e.jsxs("p",{className:"text-[#bcbcbc]",children:["#",d+1]})]}),e.jsxs("p",{className:"text-[#bcbcbc]",children:["Last Edited :"," ",k(n.date).format("DD-MMM, HH:mm")]})]},n._id)})}),S===0&&f.length===0||S===1&&o.length===0?e.jsx("div",{className:"mt-4 flex w-11/12 items-center justify-center text-[#a1a1a1]",children:xe?"Loading":"Nothing Here"}):e.jsx("div",{className:"flex w-full pt-8"})]})})]}),e.jsx("div",{className:`flex ${m?"w-1/4 sm:w-3/5 md:w-2/3 lg:w-3/4":"w-full"}`,children:e.jsx(Le,{title:i,editorValue:s,setEditorValue:l,changeNote:y,setChangeNote:b})}),e.jsxs("div",{className:"fixed bottom-0 flex w-full justify-between bg-[#3c3e41] px-1 py-[1.5px]",children:[e.jsxs("div",{className:"left-0 flex",children:[e.jsx("button",{className:"mr-4 font-inter text-xs tracking-wider text-white",onClick:()=>{w(n=>!n)},children:m?"Hide Sidebar":"Show Sidebar"}),e.jsx("button",{className:"mr-4 font-inter text-xs tracking-wider text-white",onClick:()=>{c([]),l(""),b(!0),$(""),j(""),i.current.value="",r.current.value="",v(null)},children:"Clear"}),e.jsx("button",{className:"mr-4 font-inter text-xs tracking-wider text-white",onClick:()=>{l(""),b(!0),i.current.value="",$(""),j(""),v(null)},children:"New"}),e.jsx("button",{className:"font-inter text-xs tracking-wider text-white",onClick:()=>{_(!0)},disabled:x==="",children:"Delete"})]}),e.jsxs("div",{className:"right-0 flex",children:[e.jsx("button",{className:"mr-4 font-inter text-xs tracking-wider text-white",onClick:()=>{var n;he(`${x}/reader`,{state:{title:(n=i.current)==null?void 0:n.value,value:s}})},disabled:x==="",children:"Reading Mode"}),e.jsx("button",{className:"mr-4 font-inter text-xs tracking-wider text-white",onClick:()=>{var n,d;(n=i.current)!=null&&n.value&&K((d=i.current)==null?void 0:d.value,s)},disabled:V!=="Save",children:V}),e.jsxs("p",{className:"font-inter text-xs tracking-wider text-white",children:["Last saved:"," ",C===null?"Never":C==null?void 0:C.format("DD-MMM-YYYY | HH:mm")]})]})]})]})},z=oe();z.register("cpp",ae);z.register("py",re);z.register("js",ce);const De=()=>{var f,u;const s=ke(),l=X(),r=(f=l.state)==null?void 0:f.value,i=(u=l.state)==null?void 0:u.title,o=s.id,c=G({extensions:[J,Q.configure({multicolor:!0}),ee.configure({types:[M.name,te.name]}),M.configure(),se.configure({bulletList:{keepMarks:!0,keepAttributes:!1},orderedList:{keepMarks:!0,keepAttributes:!1},codeBlock:!1}),ne.configure({languageClassPrefix:"language-",lowlight:z}),ue],content:r,editable:!1});return e.jsxs("div",{className:"min-w-screen flex min-h-screen justify-center bg-[#1f1f1f]",children:[e.jsx(F,{to:"/",state:{noteID:o},className:"fixed bottom-3 left-3 font-inter text-xs font-semibold text-[#e2e2e2]",children:"Back"}),e.jsxs("div",{className:"flex min-h-full w-11/12 flex-col bg-[#363636] px-8 py-6 font-inter text-white sm:w-4/5 md:w-3/4",children:[e.jsx("p",{className:"flex w-1/2 border-b-2 border-[#a3a3a3] bg-transparent text-xl font-semibold text-[#e8e8e8] sm:w-2/5 md:w-1/4",children:i}),e.jsx(le,{className:"mt-6 text-[#e9e9e9]",editor:c,spellCheck:"false"})]})]})},Ie=/^[a-zA-Z0-9_]+$/,_e=/^[^\s@]+@[^\s@]+\.[^\s@]+$/,Be=()=>{const s=a.useRef(null),[l,r]=a.useState("Send email"),[i,o]=a.useState(!1),c=P();return e.jsxs("div",{className:"flex h-screen w-screen items-center justify-center bg-[#1c1c1c]",children:[e.jsx("div",{className:"fixed -top-20 left-20 z-0 rotate-180 -scale-x-100 font-inter text-[150px] font-bold tracking-widest text-[#f1f1f1]",children:"reflections"}),e.jsx("div",{className:"fixed -bottom-20 right-20 z-0 font-inter text-[150px] font-bold tracking-widest text-[#f1f1f1]",children:"reflections"}),e.jsx("div",{className:"z-10 flex w-3/4 flex-col items-center justify-center sm:w-1/2 md:w-[45%] lg:w-1/4",children:e.jsxs("form",{name:"resetpasswordform",onSubmit:f=>{f.preventDefault();let u={};const m=_e.test(s.current.value),w=Ie.test(s.current.value);m||w?(m?u.email=s.current.value:u.userName=s.current.value,r("Loading..."),I.put("/resetPassword",{...u}).then(()=>{r("Send email"),c("/message",{state:{message:"Password Reset Link has been sent to your mail.",secondaryMessage:"Check your spam folder as well."}})}).catch(()=>{o(!0),console.log("Could not send password reset link")})):o(!0)},children:[e.jsx("div",{className:"mb-8 text-center font-serif text-xl font-bold tracking-tight text-white md:text-2xl lg:text-3xl",children:"Reset your password"}),e.jsx("input",{type:"text",className:"text-md mb-2 w-full rounded-lg bg-[#2e2e2e] p-2 font-serif text-[#f0f8ff] focus:bg-[#2e2e2e] focus:outline-none",placeholder:"Username",autoComplete:"off",ref:s,required:!0,spellCheck:!1}),e.jsx("button",{className:`mt-6 w-full rounded-md bg-[#61a7ec] px-3 py-2 font-serif font-bold ${i?"bg-[#89375f] text-white":"bg-[#61a7ec] text-black"}`,type:"submit",disabled:l!=="Send email",children:l})]})})]})},Ee=/^[a-zA-Z0-9_]+$/,Me=/^[^\s@]+@[^\s@]+\.[^\s@]+$/,Oe=()=>{const s=a.useRef(null),l=a.useRef(null),[r,i]=a.useState(!1),[o,c]=a.useState("Sign in"),f=P();return e.jsxs("div",{className:"flex h-screen w-screen items-center justify-center bg-[#1c1c1c]",children:[e.jsx("div",{className:"fixed -top-20 left-20 z-0 rotate-180 -scale-x-100 font-inter text-[150px] font-bold tracking-widest text-[#f1f1f1]",children:"reflections"}),e.jsx("div",{className:"fixed -bottom-20 right-20 z-0 font-inter text-[150px] font-bold tracking-widest text-[#f1f1f1]",children:"reflections"}),e.jsx("div",{className:"z-10 flex w-3/4 flex-col items-center justify-center sm:w-1/2 md:w-[45%] lg:w-1/4",children:e.jsxs("form",{name:"loginform",onSubmit:u=>{var b;u.preventDefault();let m={};const w=Me.test(s.current.value),y=Ee.test(s.current.value);w||y?(w?m.email=s.current.value:m.userName=s.current.value,c("Loading..."),I.post("/login",{...m,password:(b=l.current)==null?void 0:b.value}).then(x=>{c("Sign in"),x.data.accessToken&&(localStorage.setItem("accessToken",x.data.accessToken),localStorage.setItem("userName",s.current.value),f("/"))}).catch(x=>{console.log(x.response.data.message),c("Sign in"),i(!0)})):i(!0)},children:[e.jsx("div",{className:"mb-8 w-full justify-center text-center font-serif text-2xl font-bold tracking-tight text-white md:text-2xl lg:text-3xl",children:"Sign in to your Account"}),e.jsx("input",{type:"text",className:"text-md mb-2 w-full rounded-lg bg-[#2e2e2e] p-2 font-serif text-[#f0f8ff] focus:bg-[#2e2e2e] focus:outline-none",placeholder:"Username",autoComplete:"username",ref:s,required:!0,spellCheck:!1}),e.jsx("input",{type:"password",className:"text-md w-full rounded-lg bg-[#2e2e2e] p-2 font-serif text-[#f0f8ff] focus:bg-[#2e2e2e] focus:outline-none",placeholder:"Password",autoComplete:"current-password",ref:l,required:!0,spellCheck:!1}),e.jsx("button",{className:`text-md mt-6 w-full rounded-md ${r?"bg-[#89375f] text-white":"bg-[#61a7ec] text-black"} px-3 py-2 font-serif font-bold `,type:"submit",disabled:o!=="Sign in",children:o}),e.jsx("div",{className:"mt-1 flex w-full justify-end",children:e.jsx(F,{className:"font-serif text-xs text-[#e9e9e9]",to:"/resetPassword",children:"Forgot Password"})}),e.jsx("div",{className:"w-full text-center",children:e.jsxs("p",{className:"mt-5 font-serif text-sm font-semibold text-[#e9e9e9]",children:["Don't have an account yet,"," ",e.jsx(F,{className:"font-bold text-white",to:"/signup",children:"sign up."})]})})]})})]})},ze=/^[a-zA-Z\s]+$/,He=/^[a-zA-Z0-9_]+$/,qe=/^[^\s@]+@[^\s@]+\.[^\s@]+$/,Ue=()=>{const s=a.useRef(null),l=a.useRef(null),r=a.useRef(null),i=a.useRef(null),[o,c]=a.useState("Sign up"),[f,u]=a.useState(!1),m=P();return e.jsxs("div",{className:"flex h-screen w-screen items-center justify-center bg-[#1c1c1c]",children:[e.jsx("div",{className:"fixed -top-20 left-20 z-0 rotate-180 -scale-x-100 font-inter text-[150px] font-bold tracking-widest text-[#f1f1f1]",children:"reflections"}),e.jsx("div",{className:"fixed -bottom-20 right-20 z-0 font-inter text-[150px] font-bold tracking-widest text-[#f1f1f1]",children:"reflections"}),e.jsx("div",{className:"z-10 flex w-3/4 flex-col items-center justify-center sm:w-1/2 md:w-[45%] lg:w-1/4",children:e.jsxs("form",{name:"signupform",onSubmit:w=>{w.preventDefault(),ze.test(s.current.value)&&qe.test(l.current.value)&&He.test(r.current.value)?(c("Loading..."),I.post("/new",{name:s.current.value,email:l.current.value,userName:r.current.value,password:i.current.value}).then(()=>{c("Sign up"),m("/login")}).catch(y=>{console.log(y.response.data.message),u(!0),c("Sign up")})):u(!0)},children:[e.jsx("div",{className:"mb-8 text-center font-serif text-xl font-bold tracking-tight text-white md:text-2xl lg:text-3xl",children:"Create a New Account"}),e.jsx("input",{type:"text",className:"text-md mb-2 w-full rounded-lg bg-[#2e2e2e] p-2 font-serif text-[#f0f8ff] focus:bg-[#2e2e2e] focus:outline-none",placeholder:"Name",autoComplete:"off",ref:s,required:!0,spellCheck:!1}),e.jsx("input",{type:"email",className:"text-md mb-2 w-full rounded-lg bg-[#2e2e2e] p-2 font-serif text-[#f0f8ff] focus:bg-[#2e2e2e] focus:outline-none",placeholder:"Email",autoComplete:"off",ref:l,required:!0,spellCheck:!1}),e.jsx("input",{type:"text",className:"text-md mb-2 w-full rounded-lg bg-[#2e2e2e] p-2 font-serif text-[#f0f8ff] focus:bg-[#2e2e2e] focus:outline-none",placeholder:"Username",autoComplete:"username",ref:r,required:!0,spellCheck:!1}),e.jsx("input",{type:"password",className:"text-md w-full rounded-lg bg-[#2e2e2e] p-2 font-serif text-[#f0f8ff] focus:bg-[#2e2e2e] focus:outline-none",placeholder:"Password",autoComplete:"current-password",ref:i,required:!0,spellCheck:!1}),e.jsx("button",{className:`mt-6 w-full rounded-md bg-[#61a7ec] px-3 py-2 font-serif font-bold ${f?"bg-[#89375f] text-white":"bg-[#61a7ec] text-black"}`,type:"submit",disabled:o!=="Sign up",children:o})]})})]})},Fe=()=>{const s=P();return a.useEffect(()=>{setTimeout(()=>{s("/",{replace:!0})},3e3)},[]),e.jsxs("div",{className:"flex h-screen w-screen flex-col items-center justify-center bg-[#1c1c1c]",children:[e.jsx("p",{className:"font-serif text-4xl font-semibold text-white md:text-5xl lg:text-7xl",children:"404 Not Found"}),e.jsx("p",{className:"font-serif text-lg font-medium text-white md:text-xl lg:text-2xl",children:"The page you are looking for does not exist."})]})},Xe=()=>{const[s,l]=Ce(),r=a.useRef(null),i=a.useRef(null),[o,c]=a.useState("Change Password"),[f,u]=a.useState(!1),[m,w]=a.useState(!0),y=P(),b=s.get("resetToken"),[x,$]=a.useState("");return a.useEffect(()=>{u(!0),I.post("/checkResetToken",{resetToken:b}).then(C=>{console.log("Valid reset token"),w(!1),$(C.data.id),u(!1)}).catch(()=>{y("/message",{state:{message:"This link is no longer valid."}})})},[]),e.jsxs("div",{className:"flex h-screen w-screen items-center justify-center bg-[#1c1c1c]",children:[e.jsx("div",{className:"fixed -top-20 left-20 z-0 rotate-180 -scale-x-100 font-inter text-[150px] font-bold tracking-widest text-[#f1f1f1]",children:"reflections"}),e.jsx("div",{className:"fixed -bottom-20 right-20 z-0 font-inter text-[150px] font-bold tracking-widest text-[#f1f1f1]",children:"reflections"}),e.jsx("div",{className:"z-10 flex w-3/4 flex-col items-center justify-center sm:w-1/2 md:w-[45%] lg:w-1/4",children:e.jsxs("form",{name:"updatepasswordform",onSubmit:C=>{var v;C.preventDefault(),r.current.value===i.current.value?(c("Loading..."),I.put("/updatePassword",{id:x,password:(v=r.current)==null?void 0:v.value}).then(()=>{console.log("Password updated"),c("Change Password"),y("/message",{state:{message:"Password has been updated successfully.",secondaryMessage:"Log in to your account with the new password."}})}).catch(S=>{console.log("Password could not updated"),console.log(S),w(!0),c("Change Password")})):w(!0)},children:[e.jsx("div",{className:"mb-8 text-center font-serif text-xl font-bold tracking-tight text-white md:text-2xl lg:text-3xl",children:"Update your password"}),e.jsx("input",{type:"password",className:"text-md mb-2 w-full rounded-lg bg-[#2e2e2e] p-2 font-serif text-[#f0f8ff] focus:bg-[#2e2e2e] focus:outline-none",placeholder:"Password",autoComplete:"off",ref:r,required:!0,disabled:f,spellCheck:!1}),e.jsx("input",{type:"password",className:"text-md w-full rounded-lg bg-[#2e2e2e] p-2 font-serif text-[#f0f8ff] focus:bg-[#2e2e2e] focus:outline-none",placeholder:"Confirm Password",autoComplete:"off",ref:i,required:!0,disabled:f,spellCheck:!1}),e.jsx("button",{className:`mt-6 w-full rounded-md bg-[#61a7ec] px-3 py-2 font-serif font-bold ${m?"bg-[#89375f] text-white":"bg-[#61a7ec] text-black"}`,type:"submit",disabled:o!=="Change Password"&&f,children:o})]})})]})},Ve=()=>{const s=X(),l=s.state.message,r=s.state.secondaryMessage;return e.jsxs("div",{className:"flex h-screen w-screen items-center justify-center bg-[#1c1c1c]",children:[e.jsx("div",{className:"fixed -top-20 left-20 z-0 rotate-180 -scale-x-100 font-inter text-[150px] font-bold tracking-widest text-[#f1f1f1]",children:"reflections"}),e.jsx("div",{className:"fixed -bottom-20 right-20 z-0 font-inter text-[150px] font-bold tracking-widest text-[#f1f1f1]",children:"reflections"}),e.jsxs("div",{className:"z-10 flex w-4/5 flex-col items-center justify-center",children:[e.jsx("div",{className:"text-md flex h-full w-full items-center justify-center text-center font-serif font-semibold text-white sm:text-xl",children:l}),r&&e.jsx("div",{className:"mt-1 flex h-full w-full items-center justify-center text-center font-serif text-sm font-medium text-[#f1f1f1] sm:text-lg",children:r})]})]})};function Ke(){return e.jsxs(ye,{children:[e.jsx(T,{path:"/",element:e.jsx(Ae,{})}),e.jsx(T,{path:"/:id/reader",element:e.jsx(De,{})}),e.jsx(T,{path:"/login",element:e.jsx(Oe,{})}),e.jsx(T,{path:"/signup",element:e.jsx(Ue,{})}),e.jsx(T,{path:"/updatePassword",element:e.jsx(Xe,{})}),e.jsx(T,{path:"/resetPassword",element:e.jsx(Be,{})}),e.jsx(T,{path:"message",element:e.jsx(Ve,{})}),e.jsx(T,{path:"*",element:e.jsx(Fe,{})})]})}je.createRoot(document.getElementById("root")).render(e.jsx(Se,{children:e.jsx(we.StrictMode,{children:e.jsx(Ke,{})})}));
